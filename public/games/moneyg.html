<!DOCTYPE html>
<html>
<head>
    <title>Idle Mining Empire - API BYPASS FIX</title>
    
    <base href="https://3352cd9b-19b5-406c-bff7-cafba1519f27.poki-gdn.com/e2e0a985-ae42-4530-869e-2690d302879d/">

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no, minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    
    <link rel="icon" type="image/x-icon" href="media/graphics/misc/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="game.css">

    <link rel="preload" href="texture-0.png" as="image">
    <link rel="preload" href="texture-1.png" as="image">

    <script>
        window.Poki = {
            API: {
                // The game is likely checking for an 'enabled' or 'initialized' state.
                enabled: true,
                // The game is often waiting for a 'gameLoadingFinished' call to proceed past the splash screen.
                gameLoadingFinished: function() { 
                    console.log("Poki API Bypass: gameLoadingFinished called successfully.");
                },
                // Add other common dummy functions the game might call
                commercialBreak: function(callback) { callback({ success: true }); },
                rewardedBreak: function(callback) { callback({ success: true, reason: "dummy" }); },
                gameplayStart: function() {},
                gameplayStop: function() {},
                setDebug: function() {},
                isAdBlocked: function() { return false; }
            }
        };
        // The game often checks if the window is being framed (iframe check)
        window.isPoki = true; 
        
        // Some games use this legacy wrapper call
        if (typeof(Poki) === 'undefined') {
            window.Poki = {};
        }
    </script>

    <script type="text/javascript" src="game.js"></script>

    <style>
        /* CSS remains the same */
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            background-color: #000;
        }
        #ajaxbar {
            width: 100%;
            height: 100%;
        }
        #game {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body onload="setTimeout(function(){window.scrollTo(0,1)},1);">
    <div id="ajaxbar">
        <div id="game"><canvas id="canvas"></canvas></div>
    </div> 
</body>
</html>
